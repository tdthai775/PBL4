<Window x:Class="Server.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        Title="Server" Width="900" Height="650"
        Background="{DynamicResource BrushBackgroundDark}"
        Foreground="{DynamicResource BrushGrayLight}"
        FontFamily="Segoe UI" FontSize="13">

    <Window.Resources>
        <SolidColorBrush x:Key="BrushBackgroundDark"  Color="#111827"/>
        <SolidColorBrush x:Key="BrushBackgroundDark2" Color="#1F2937"/>
        <SolidColorBrush x:Key="BrushBackgroundDark3" Color="#374151"/>
        <SolidColorBrush x:Key="BrushGrayLight"       Color="#E5E7EB"/>
        <SolidColorBrush x:Key="BrushGrayMedium"      Color="#9CA3AF"/>
        <SolidColorBrush x:Key="BrushAccentBlue"      Color="#2563EB"/>
        <SolidColorBrush x:Key="BrushAccentGreen"     Color="#22C55E"/>
        <SolidColorBrush x:Key="BrushAccentRed"       Color="#DC2626"/>
        <SolidColorBrush x:Key="BrushAccentYellow"    Color="#EAB308"/>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="3*"/>
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2"
                   Text="Hệ Thống Quản Lý Server - Client"
                   FontSize="20" FontWeight="Bold"
                   Foreground="{StaticResource BrushAccentBlue}"
                   HorizontalAlignment="Center" Margin="0 0 0 20"/>

        <StackPanel Grid.Row="1" Grid.Column="0" Margin="0 0 10 0">
            <Border Padding="15" CornerRadius="8" Margin="0,0,0,10"
                    Background="{StaticResource BrushBackgroundDark2}">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0 0 0 10">
                        <materialDesign:PackIcon Kind="PowerSettings" Width="20" Height="20"
                                                 Foreground="{StaticResource BrushAccentBlue}" Margin="0,0,5,0"/>
                        <TextBlock Text="Điều Khiển Server" FontSize="16" FontWeight="SemiBold"/>
                    </StackPanel>
                    <Grid Margin="0 0 0 15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Trạng thái:" Margin="0,0,10,2"/>
                        <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal">
                            <Ellipse x:Name="ServerStatusEllipse" Width="8" Height="8" Fill="{StaticResource BrushAccentRed}" VerticalAlignment="Center" Margin="0,0,5,0"/>
                            <TextBlock x:Name="ServerStatusText" Text="Đã dừng" Foreground="{StaticResource BrushAccentRed}"/>
                        </StackPanel>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Port lắng nghe:" Margin="0,5,10,2"/>
                        <TextBox x:Name="PortTextBox" Grid.Row="1" Grid.Column="1" Text="8080" Padding="2" Margin="0,5,0,0"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Clients:" Margin="0,5,10,2"/>
                        <TextBlock x:Name="ClientCountText" Grid.Row="2" Grid.Column="1" Text="0" Margin="0,5,0,0"/>
                    </Grid>

                    <Button x:Name="StartStopButton" 
                            Click="StartStopButton_Click" 
                            Background="{StaticResource BrushAccentGreen}" Foreground="White" BorderThickness="0" Cursor="Hand" Width="153">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon x:Name="StartStopIcon" Kind="Play" Margin="0,0,5,0"/>
                            <TextBlock x:Name="StartStopText" Text="Khởi Động Server"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Border>

            <GroupBox Header="Chat" Height="389">
                <TextBlock Text="Tính năng chat sẽ được phát triển sau..." 
                           VerticalAlignment="Center" HorizontalAlignment="Center" 
                           Foreground="{StaticResource BrushGrayMedium}"/>
            </GroupBox>
        </StackPanel>

        <Border Grid.Row="1" Grid.Column="1" Padding="15" CornerRadius="8"
            Background="{StaticResource BrushBackgroundDark2}">
            <StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0 0 0 10">
                    <materialDesign:PackIcon Kind="MonitorMultiple" Width="20" Height="20"
                                             Foreground="{StaticResource BrushAccentBlue}" Margin="0,0,5,0"/>
                    <TextBlock FontSize="16" FontWeight="SemiBold">
                        <Run Text="Quản Lý Client ("/>
                        <Run Text="{Binding ElementName=ClientListBox, Path=Items.Count, Mode=OneWay}"/>
                        <Run Text=")"/>
                    </TextBlock>
                </StackPanel>

                <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="500">
                    <ItemsControl x:Name="ClientListBox">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Padding="10" Margin="0 5 0 5" CornerRadius="6"
                                        Background="{StaticResource BrushBackgroundDark3}">
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0 0 0 8">
                                            <materialDesign:PackIcon Kind="DesktopClassic" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                            <TextBlock Text="{Binding Name}" FontWeight="SemiBold" VerticalAlignment="Center"/>

                                            <TextBlock Text="{Binding IpAddress, StringFormat=' - {0}'}" Foreground="{StaticResource BrushGrayMedium}" VerticalAlignment="Center" Margin="5,0,0,0"/>
                                        </StackPanel>

                                        <StackPanel Orientation="Horizontal">
                                            <Button Padding="8,4" Margin="0,0,5,0" Cursor="Hand"
                                                    Click="ShutdownButton_Click"
                                                    Background="{StaticResource BrushAccentRed}" Foreground="White" BorderThickness="0">
                                                <StackPanel Orientation="Horizontal">
                                                    <materialDesign:PackIcon Kind="Power" Margin="0,0,5,0"/>
                                                    <TextBlock Text="Tắt máy"/>
                                                </StackPanel>
                                            </Button>
                                            <Button Padding="8,4" Margin="0,0,5,0" Cursor="Hand"
                                                    Click="RestartButton_Click"
                                                    Background="{StaticResource BrushAccentBlue}" Foreground="White" BorderThickness="0">
                                                <StackPanel Orientation="Horizontal">
                                                    <materialDesign:PackIcon Kind="Reload" Margin="0,0,5,0"/>
                                                    <TextBlock Text="Khởi động lại"/>
                                                </StackPanel>
                                            </Button>
                                            <Button Padding="8,4" Margin="0,0,5,0" Cursor="Hand"
                                                    Background="{StaticResource BrushAccentYellow}" Foreground="Black" BorderThickness="0">
                                                <StackPanel Orientation="Horizontal">
                                                    <materialDesign:PackIcon Kind="MessageOutline" Margin="0,0,5,0"/>
                                                    <TextBlock Text="Tin nhắn"/>
                                                </StackPanel>
                                            </Button>
                                            <Button Padding="8,4" Cursor="Hand" 
                                                    Click="StreamScreenButton_Click"
                                                    Background="{StaticResource BrushAccentGreen}" Foreground="White" BorderThickness="0">
                                                <StackPanel Orientation="Horizontal">
                                                    <materialDesign:PackIcon Kind="MonitorScreenshot" Margin="0,0,5,0"/>
                                                    <TextBlock Text="Stream Màn Hình"/>
                                                </StackPanel>
                                            </Button>

                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </StackPanel>
        </Border>
    </Grid>
</Window>